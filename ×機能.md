# メイン機能

	構成										パス									備考

## アカウント関連										Account/
	-	ログイン									Login.vbhtml
		+	セッションタイムアウト
		+	アカウントロックアウト
	-	パスワード変更									ChangePassword.vbhtml									認証後
	-	パスワード再設定									ForgotPassword.vbhtml
## ホームページ										Home/
	-	メニュー画面									Index.vbhtml
		+	管理者用メニュー																	認証後
		+																		パスワード変更ページへのリンク、ログアウト
## ユーザー登録抹消申請										Request/
	-	ユーザー情報
	-	申請承認・差戻し
	-	所属一括変更
	-	変更履歴
	-	ユーザー検索
		+	高度な検索
	-	所属設定・選択
## 共通										Shared/
	-	エラー頁
	-	ログアウト確認
## マスタメンテナンス										Master/									認証後
	-	メニュー画面
	-	社員マスタ
	-	組織マスタ
	-	所属マスタ
	-	アクセス権マスタ

# サブ機能

	機能										備考
* DBAccess										postgresql.odbc
* SQL自動生成
## 区分
* 証跡社員.変更区分
	- 0:変更前
	- 1:変更後
* 証跡社員.モード
	- 1:登録
	- 2:変更
	- 3:抹消
* 証跡社員.身分証
	- 0:ある
	- 1:ない
* 証跡所属.主所属
	- 0:兼務
	- 1:主
* 依頼.状態
	- 1:申請済
	- 2:申請取消
	- 3:承諾済
	- 4:申請差戻
## ロール
### OAリーダー
### 承諾者
### システム管理者
## サービス
### RequestService:申請関連
### AccountService:アカウント関連
	ログイン→SignInManager
	パスワードリセット→UserManager
	メール送信→UserManager→MailService
#### AccountViewModels
#### IdentityModels
### ManageService:ユーザー情報変更
	パスワード変更→UserManager
#### ManageViewModels
### Commons:共通処理(DLL)
#### SignInManager
	DBAccess.connectionを引き渡し
* ログイン処理
	- 失敗：ログインに失敗しました
	- ロックアウト：ユーザーがロックアウトされている
	- 有効期限切れ：パスワードの有効期限が切れている
	- 成功：サインインに成功しました	
* 入力チェック(Model検証)
	- 必須
	- 入力規則(半角文字と数字、数字以外の文字)
* ユーザー情報をDBより取得
	- ロックアウト確認
		* マスタ情報が取得できなかったらエラー
	- パスワード一致
		* 失敗回数をリセット
		* 有効開始日確認
		* パスワード有効期限
			- パスワード変更画面遷移(変更しないと他に移動できない)
	- パスワード不一致
		* 失敗回数をカウントアップ
#### UserManager
	DBAccess.connectionを引き渡し
* パスワード変更処理
	- PasswordValidator：パスワード強度チェック(変更を保持する前に、パスワードを検証するために使用する)
	- RequiredMaxLength
	- RequiredMinLength
* ロックアウト設定
	- UserLockoutEnabledByDefault = True:ロックアウトするか？
	- MaxFailedAccessAttemptsBeforeLockout = 5：ロックアウト最大回数
	- イベントビューアへ書き込み
* メール配信設定
	- MailService
#### UserStore
	データベース処理(内部)
#### IdentityResult 
	ユーザーIDの処理結果を格納する
* [IdentityResult クラス](https://msdn.microsoft.com/ja-jp/library/microsoft.aspnet.identity.identityresult(v=vs.111).aspx)
## 非機能
### ログ出力：log4net
### メール送信：System.Mail
### 出力メッセージの外部ファイル化：XML
### エラー画面
* 個別例外処理：HandleError
	- 業務上の例外処理は、個別にログ出力をし処理をする。
* 集約例外処理：Application_ERROR
	- エラー画面に遷移してメッセージを出力する。
### 例外処理
