# vSAN
 * ver.5.5(2年前)から登場したが、当時は推奨されていなかった。
 * 2年前のJSWサーバー入替時に出始めたが、ストレージが1台だったのもありメリットがでなかったので利用していない。
 * 機能を全て利用するにはオールフラッシュ構成である必要がある。
 * オールフラッシュでないとHCIのパフォーマンスは低い(ハイブリットに比べ3～4倍速い)。
 * オールフラッシュでないと重複排除機能が使えないので、容量削減はできない。
	+ 外部ストレージ利用の場合は外部ストレージの重複排除機能が使える。
## ハードに関して
### ストレージ
 * オールフラッシュにするかハイブリットかでコストは異なる。
 * SSDにも高価な高速タイプ(NVMe)と安価な低速大容量タイプ(SATA)があり、オールフラッシュ構成はこの2つの組み合わせでトータルコスト(TC)を抑える。
 * 共用ストレージでの構成は本体に加え、高価な10Gbpsスイッチが必要。
	+ ファイバーチャネル(FC)の方が10Gbスイッチより安い。(価格差１００万円)
 * HDDのコントローラとなる、RAIDやSASがボトルネックとなる上にハードウェアとしてもコストになる。
 * SSDは汎用マザーボードで搭載可能なNVMeやSATAの規格でも動作する。
 * 汎用サーバーは、各部品の信頼性は落ちるが、SSD自体が壊れにくく、交換もしやすいので故障のリスクをある程度とれればよりコストを抑えられる。
 * 汎用サーバーは、従来の高信頼性規格より安価に利用でき、ハードウェアのコストも抑えられる。
 * HDDは壊れやすいので、入替作業に伴う保守費用も掛かる。また、入替作業時間もHDDは遅い。(NEC製品のよ うな高性能なNASはそんなことないそうだ)
 * SSDは初期不良以外はほとんど壊れないので、保守作業費用を抑えられる。
 * JSWサーバーが外部ストレージ利用だが、SSDのオールフラッシュ構成でWinUpd等の作業時間がかなり短い。 (HDDだったかつてなら1時間掛かるところ、15分程度になっている)
### CPUとメモリ
 * 最新型なら各社変わらない。
 * コストを抑えるには…
	+ HCIにすると高価なスイッチやファイバーチャネル(FC)が不要となり、TCを抑えることができる。
	  ただし、ネットワークスイッチは10GBが推奨の為、この部分は高価なスイッチとあまり価格は変わらない。
		- スイッチを省略することも可能な模様。
	+ コストで差が出やすいのはストレージの構成部分。コストを重要視するなら、ストレージを安くできるメーカーを組み合わせて使うとよい。
#### Software Defined Storage(SDS)：ストレージ仮想化技術
 SDS主要メーカーはvmware(大塚*NEC、DELL),hp,nutanix（レノボ）。
#### ネットワークはどうするのか？
 vmotion同様、ソフトウェア側で専用回線を作る。
* 物理ネットワークをどうするのか(FCやiSCSI,smb,NFS)は選択する必要がある。
## ハイパーコンバージドインフラストラクチャ(HCI)：超垂直統合型インフラ
	最小３ノード構成だが、VMware社としては障害対応用に１台追加した４ノード構成を推奨。
	その場合、１０gbスイッチを導入する必要がある。（２台構成の場合、直接２台をつなぐことができ、スイッチを購入する必要はない）
	サーバーの製造メーカーが異なったとしても、基幹部分(SDS)が同じであれば共用できるらしい。
### vSAN ReadyNode
	２０１８年現在、VMware関連は対応済み製品が出ているので気にする必要はない。
### VxRail
	DellとVMwareが組んだ製品。４ノード構成を1筐体で実現。
### Nutanix
	Windows vCenterを外出し構築する必要がある。
	最小の3台構成において、管理サーバーにWindows Serverを用意する必要が出る。
#### AHV
	Nutanix の仮想マシン環境
	ESX環境からも移行できるが、5.5未満の環境だと変換手順が面倒